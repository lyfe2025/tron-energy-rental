# Scripts ç›®å½•è¯´æ˜

æ­¤ç›®å½•åŒ…å«é¡¹ç›®çš„å„ç§å®ç”¨è„šæœ¬ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

## ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„

### æ ¸å¿ƒæ¨¡å— (v2.0)
- `core/utils.sh` - é€šç”¨å·¥å…·å‡½æ•°å’Œé…ç½®ç®¡ç†
- `core/service-manager.sh` - æœåŠ¡ç®¡ç†æ¨¡å— (å¯åŠ¨/åœæ­¢/é‡å¯)
- `core/log-manager.sh` - æ—¥å¿—ç®¡ç†æ¨¡å— (æŸ¥çœ‹/æ¸…ç†/ç»Ÿè®¡)
- `core/database-manager.sh` - æ•°æ®åº“ç®¡ç†æ¨¡å— (å¤‡ä»½/æ¢å¤/éªŒè¯)

### æ¶æ„ä¼˜åŠ¿
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£å•ä¸€
- âœ… ä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤
- âœ… æ˜“äºæµ‹è¯•å’Œç»´æŠ¤
- âœ… ä¾¿äºåŠŸèƒ½æ‰©å±•

## ğŸ“‚ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å— (è¢«project.shè°ƒç”¨)
â”‚   â”œâ”€â”€ utils.sh                 # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ service-manager.sh       # æœåŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ log-manager.sh          # æ—¥å¿—ç®¡ç†
â”‚   â””â”€â”€ database-manager.sh     # æ•°æ®åº“ç®¡ç†
â”œâ”€â”€ database/          # æ•°æ®åº“ç‹¬ç«‹è„šæœ¬
â”‚   â”œâ”€â”€ backup-database.sh      # ç‹¬ç«‹å¤‡ä»½è„šæœ¬
â”‚   â””â”€â”€ restore-database.sh     # ç‹¬ç«‹æ¢å¤è„šæœ¬
â”œâ”€â”€ development/       # å¼€å‘å’Œæµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ dev-check.sh           # å¼€å‘ç¯å¢ƒæ£€æŸ¥
â”‚   â”œâ”€â”€ api-check.sh           # APIæœåŠ¡æ£€æŸ¥
â”‚   â”œâ”€â”€ frontend-check.sh      # å‰ç«¯æœåŠ¡æ£€æŸ¥
â”‚   â”œâ”€â”€ quick-fix.sh           # å¿«é€Ÿä¿®å¤å·¥å…·
â”‚   â”œâ”€â”€ test_api.sh            # APIæµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test_api_updated.sh    # æ›´æ–°çš„APIæµ‹è¯•
â”œâ”€â”€ maintenance/       # ä»£ç ç»´æŠ¤å·¥å…·
â”‚   â”œâ”€â”€ apply-chinese-comments.sh   # åº”ç”¨ä¸­æ–‡æ³¨é‡Š
â”‚   â”œâ”€â”€ apply-chinese-comments.ts   # TypeScriptç‰ˆæ³¨é‡Šå·¥å…·
â”‚   â””â”€â”€ verify-comments.ts          # éªŒè¯æ³¨é‡Šå®Œæ•´æ€§
â”œâ”€â”€ admin/            # ç®¡ç†å‘˜å·¥å…·
â”‚   â”œâ”€â”€ check-admin-accounts.ts     # æ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·
â”‚   â”œâ”€â”€ update-admin-password.ts    # æ›´æ–°ç®¡ç†å‘˜å¯†ç 
â”‚   â”œâ”€â”€ test-password.ts            # æµ‹è¯•å¯†ç åŠŸèƒ½
â”‚   â””â”€â”€ check-login-type.ts         # æ£€æŸ¥ç™»å½•ç±»å‹
â””â”€â”€ README.md         # æœ¬æ–‡æ¡£
```

## ğŸ“¦ è„šæœ¬åˆ†ç±»è¯¦è§£

### ğŸ—ï¸ æ ¸å¿ƒæ¨¡å— (core/)
è¢« `project.sh` ä¸»è„šæœ¬è°ƒç”¨çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œæä¾›ç»Ÿä¸€çš„æœåŠ¡ç®¡ç†å…¥å£ã€‚

### ğŸ’¾ æ•°æ®åº“å·¥å…· (database/)

#### backup-database.sh
- **åŠŸèƒ½**: åˆ›å»ºPostgreSQLæ•°æ®åº“çš„å®Œæ•´å¤‡ä»½
- **ç”¨æ³•**: `./database/backup-database.sh [å¤‡ä»½ç›®å½•]`
- **ç‰¹æ€§**: 
  - è‡ªåŠ¨è¯»å–.envé…ç½®
  - åŒ…å«å®Œæ•´æ•°æ®ç»“æ„å’Œæ•°æ®
  - ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„SQLæ–‡ä»¶
  - å¤‡ä»½å‰è‡ªåŠ¨æµ‹è¯•è¿æ¥

#### restore-database.sh
- **åŠŸèƒ½**: ä»SQLå¤‡ä»½æ–‡ä»¶æ¢å¤PostgreSQLæ•°æ®åº“
- **ç”¨æ³•**: `./database/restore-database.sh <å¤‡ä»½æ–‡ä»¶è·¯å¾„>`
- **ç‰¹æ€§**: 
  - åŒé‡ç¡®è®¤ä¿æŠ¤æœºåˆ¶
  - æ¢å¤åè‡ªåŠ¨éªŒè¯
  - è¯¦ç»†çš„è¿›åº¦å’Œé”™è¯¯æç¤º
  - æ”¯æŒä»»æ„è·¯å¾„çš„å¤‡ä»½æ–‡ä»¶

### ğŸ”§ å¼€å‘å·¥å…· (development/)
å¼€å‘å’Œæµ‹è¯•é˜¶æ®µä½¿ç”¨çš„å„ç§æ£€æŸ¥å’Œä¿®å¤å·¥å…·ã€‚

#### dev-check.sh
- **åŠŸèƒ½**: å¼€å‘ç¯å¢ƒæ£€æŸ¥
- **ç”¨æ³•**: `./development/dev-check.sh`
- **è¯´æ˜**: æ£€æŸ¥å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®å’Œä¾èµ–

#### api-check.sh
- **åŠŸèƒ½**: APIæœåŠ¡æ£€æŸ¥
- **ç”¨æ³•**: `./development/api-check.sh`
- **è¯´æ˜**: æ£€æŸ¥åç«¯APIæœåŠ¡çš„è¿è¡ŒçŠ¶æ€

#### frontend-check.sh
- **åŠŸèƒ½**: å‰ç«¯æœåŠ¡æ£€æŸ¥
- **ç”¨æ³•**: `./development/frontend-check.sh`
- **è¯´æ˜**: æ£€æŸ¥å‰ç«¯åº”ç”¨çš„è¿è¡ŒçŠ¶æ€

#### quick-fix.sh
- **åŠŸèƒ½**: å¿«é€Ÿä¿®å¤å¸¸è§é—®é¢˜
- **ç”¨æ³•**: `./development/quick-fix.sh`
- **è¯´æ˜**: è‡ªåŠ¨ä¿®å¤é¡¹ç›®ä¸­çš„å¸¸è§é…ç½®å’Œä¾èµ–é—®é¢˜

#### test_api.sh / test_api_updated.sh
- **åŠŸèƒ½**: APIæµ‹è¯•è„šæœ¬
- **ç”¨æ³•**: `./development/test_api.sh`
- **è¯´æ˜**: æµ‹è¯•APIæ¥å£çš„åŠŸèƒ½å’Œæ€§èƒ½

### ğŸ“ ä»£ç ç»´æŠ¤ (maintenance/)
ä»£ç è´¨é‡å’Œæ³¨é‡Šç»´æŠ¤ç›¸å…³å·¥å…·ã€‚

#### apply-chinese-comments.sh
- **åŠŸèƒ½**: åº”ç”¨ä¸­æ–‡æ³¨é‡Šåˆ°ä»£ç 
- **ç”¨æ³•**: `./maintenance/apply-chinese-comments.sh`
- **è¯´æ˜**: ä¸ºä»£ç æ·»åŠ ä¸­æ–‡æ³¨é‡Šï¼Œæé«˜å¯è¯»æ€§

#### apply-chinese-comments.ts
- **åŠŸèƒ½**: TypeScriptç‰ˆæœ¬çš„ä¸­æ–‡æ³¨é‡Šå·¥å…·
- **ç”¨æ³•**: `ts-node maintenance/apply-chinese-comments.ts`
- **è¯´æ˜**: ä½¿ç”¨TypeScriptå®ç°çš„æ³¨é‡Šå·¥å…·

#### verify-comments.ts
- **åŠŸèƒ½**: éªŒè¯ä»£ç æ³¨é‡Šå®Œæ•´æ€§
- **ç”¨æ³•**: `ts-node maintenance/verify-comments.ts`
- **è¯´æ˜**: æ£€æŸ¥ä»£ç ä¸­æ³¨é‡Šçš„è¦†ç›–ç‡å’Œè´¨é‡

### ğŸ‘¤ ç®¡ç†å‘˜å·¥å…· (admin/)
ç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ·å’Œæƒé™ç®¡ç†ç›¸å…³å·¥å…·ã€‚

#### check-admin-accounts.ts
- **åŠŸèƒ½**: æ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·çŠ¶æ€
- **ç”¨æ³•**: `ts-node admin/check-admin-accounts.ts`
- **è¯´æ˜**: éªŒè¯ç³»ç»Ÿä¸­ç®¡ç†å‘˜è´¦æˆ·çš„é…ç½®å’Œæƒé™

#### update-admin-password.ts
- **åŠŸèƒ½**: æ›´æ–°ç®¡ç†å‘˜å¯†ç 
- **ç”¨æ³•**: `ts-node admin/update-admin-password.ts`
- **è¯´æ˜**: å®‰å…¨åœ°æ›´æ–°ç®¡ç†å‘˜è´¦æˆ·å¯†ç 

#### test-password.ts
- **åŠŸèƒ½**: å¯†ç åŠŸèƒ½æµ‹è¯•
- **ç”¨æ³•**: `ts-node admin/test-password.ts`
- **è¯´æ˜**: æµ‹è¯•å¯†ç åŠ å¯†ã€éªŒè¯ç­‰åŠŸèƒ½

#### check-login-type.ts
- **åŠŸèƒ½**: æ£€æŸ¥ç™»å½•ç±»å‹é…ç½®
- **ç”¨æ³•**: `ts-node admin/check-login-type.ts`
- **è¯´æ˜**: éªŒè¯ç³»ç»Ÿç™»å½•æ–¹å¼çš„é…ç½®

## ğŸš€ ä½¿ç”¨æŒ‡å—

### è¿è¡ŒTypeScriptè„šæœ¬
```bash
# ç¡®ä¿å·²å®‰è£…ä¾èµ–
npm install

# è¿è¡ŒTypeScriptè„šæœ¬
npx ts-node scripts/è„šæœ¬å.ts
```

### è¿è¡ŒShellè„šæœ¬
```bash
# æ ¸å¿ƒæ¨¡å—ï¼ˆé€šè¿‡project.shè°ƒç”¨ï¼‰
./project.sh

# æ•°æ®åº“ç‹¬ç«‹è„šæœ¬
./scripts/database/backup-database.sh
./scripts/database/restore-database.sh

# å¼€å‘å·¥å…·è„šæœ¬
./scripts/development/dev-check.sh
./scripts/development/api-check.sh

# ä»£ç ç»´æŠ¤è„šæœ¬  
./scripts/maintenance/apply-chinese-comments.sh

# ç®¡ç†å‘˜å·¥å…·è„šæœ¬
ts-node scripts/admin/check-admin-accounts.ts
```

### æŸ¥çœ‹è„šæœ¬å¸®åŠ©
å¤§å¤šæ•°è„šæœ¬æ”¯æŒ `-h` æˆ– `--help` å‚æ•°ï¼š
```bash
./scripts/database/backup-database.sh --help
./scripts/database/restore-database.sh -h
```

## ğŸ“ æ–‡ä»¶æƒé™

æ‰€æœ‰ `.sh` è„šæœ¬æ–‡ä»¶éƒ½å·²è®¾ç½®æ‰§è¡Œæƒé™ï¼š
```bash
-rwxr-xr-x  backup-database.sh
-rwxr-xr-x  restore-database.sh
# ... å…¶ä»–è„šæœ¬
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è„šæœ¬**: è¯·ç¡®ä¿ `.env` æ–‡ä»¶é…ç½®æ­£ç¡®
2. **TypeScriptè„šæœ¬**: éœ€è¦é¡¹ç›®ä¾èµ–å·²å®‰è£…
3. **æƒé™è¦æ±‚**: æŸäº›è„šæœ¬å¯èƒ½éœ€è¦æ•°æ®åº“ç®¡ç†æƒé™
4. **å¤‡ä»½æ¢å¤**: æ¢å¤æ“ä½œä¼šè¦†ç›–ç°æœ‰æ•°æ®ï¼Œè¯·è°¨æ…æ“ä½œ

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚æœè„šæœ¬è¿è¡Œé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥è„šæœ¬çš„å¸®åŠ©ä¿¡æ¯
2. ç¡®è®¤ç¯å¢ƒé…ç½®æ­£ç¡®
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ

---
*æœ€åæ›´æ–°: $(date "+%Y-%m-%d")*

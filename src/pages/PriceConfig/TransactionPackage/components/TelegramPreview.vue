<template>
  <div class="md:w-1/3">
    <!-- Telegramé£æ ¼é¢„è§ˆ -->
    <div class="bg-white rounded-lg border shadow-sm max-w-sm sticky top-4 min-h-[600px]">
      <!-- æœºå™¨äººå¤´éƒ¨ -->
      <div class="bg-blue-500 text-white px-4 py-3 rounded-t-lg">
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center">
            <span class="text-xs">ğŸ¤–</span>
          </div>
          <div>
            <div class="text-sm font-medium">TRONèƒ½é‡ç§Ÿèµæœºå™¨äºº</div>
            <div class="text-xs text-blue-100">åœ¨çº¿</div>
          </div>
        </div>
      </div>
      
      <!-- æ¶ˆæ¯å†…å®¹ - ä½¿ç”¨é‡æ„åçš„ç»„ä»¶ -->
      <div class="p-4 space-y-3">
        <RefactoredTelegramPreview v-bind="refactoredProps" />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import RefactoredTelegramPreview from '../../../../components/telegram-preview/TelegramPreview.vue'
import type { Button } from '../composables/usePackageConfig'

interface Props {
  // æ¶ˆæ¯é…ç½®
  mainMessageTemplate?: string
  dailyFee: number
  usageRules: string[]
  notes: string[]
  
  // æŒ‰é’®é…ç½®
  regularButtons: Button[]
  specialButtons: Button[]
  
  // å›¾ç‰‡é…ç½®
  imageEnabled: boolean
  imageUrl: string
  imageAlt: string
  
  // è®¢å•ç¡®è®¤é…ç½®
  currentUnitPrice?: number
  currentTotalAmount?: number
  currentTransactionCount?: number
  paymentAddress?: string
  orderExpireMinutes?: number
  orderConfirmationTemplate?: string
  orderConfirmationTemplateTrx?: string
}

const props = defineProps<Props>()

// å°†propsä¼ é€’ç»™é‡æ„åçš„ç»„ä»¶
const refactoredProps = computed(() => ({
  mainMessageTemplate: props.mainMessageTemplate,
  dailyFee: props.dailyFee,
  usageRules: props.usageRules || [],
  notes: props.notes || [],
  regularButtons: props.regularButtons || [],
  specialButtons: props.specialButtons || [],
  imageEnabled: props.imageEnabled || false,
  imageUrl: props.imageUrl || '',
  imageAlt: props.imageAlt || '',
  currentUnitPrice: props.currentUnitPrice,
  currentTotalAmount: props.currentTotalAmount,
  currentTransactionCount: props.currentTransactionCount,
  paymentAddress: props.paymentAddress,
  orderExpireMinutes: props.orderExpireMinutes,
  orderConfirmationTemplate: props.orderConfirmationTemplate,
  orderConfirmationTemplateTrx: props.orderConfirmationTemplateTrx
}))
</script>

<!--
é‡æ„è¯´æ˜ï¼š
åŸå§‹607è¡Œä»£ç å·²åˆ†ç¦»åˆ°ä»¥ä¸‹æ¨¡å—ï¼š
- src/components/telegram-preview/TelegramPreview.vue (ä¸»ç»„ä»¶)
- src/components/telegram-preview/components/ (å­ç»„ä»¶)
- src/components/telegram-preview/composables/ (ä¸šåŠ¡é€»è¾‘)
- src/components/telegram-preview/utils/ (å·¥å…·å‡½æ•°)

æ­¤æ–‡ä»¶ç°åœ¨ä½œä¸ºå‘åå…¼å®¹çš„åŒ…è£…å™¨
-->
我们当前项目，用户在机器人回复键盘里面点击能量闪租后，我们机器人回返回对应价格配置的能量闪租配置（现有），这个时候用户可以看到下单地址，当用户通过自己的钱包给我们下单地址转账后，我们需要解决：

1.需要知道用户在我们指定的的地址转账了多少trx（需要监听对应网络上的地址）

2.根据用户转账的 trx，我们要匹配对应的笔数（注意笔数不能超过设置的最大笔数，这个我们已经有实现了配置，如果超过最大的笔数 也按最大的笔数计算）


3.根据用户支付的 trx 价格计算好用户获得的笔数后，给用户完成对应笔数的能量的代理（单笔的能量配置基于我们已经实现了在 资源消耗配置-能量消耗里面 ），也就是把我们能量池账户中的能量代理给当前转账 trx 的用户（这边要根据我们的能量闪租去匹配代理出去的能量是否需要设定时效）

就以上需求，请你给我一个具体实时的技术方案，要有详细的步骤














🎉 欢迎使用TRON能量租赁机器人！

👋 你好，响指！

🔋 我们提供快速、安全的TRON能量租赁服务：
• 💰 超低价格，性价比最高
• ⚡ 秒级到账，即买即用
• 🛡️ 安全可靠，无需私钥
• 🎯 多种套餐，满足不同需求

📱 使用 /menu 查看主菜单
❓ 使用 /help 获取帮助


📖 TRON能量租赁机器人使用指南

🤖 基础命令：
• /start - 启动机器人
• /menu - 显示主菜单
• /help - 显示帮助信息
• /balance - 查询账户余额
• /orders - 查看订单历史

🔋 能量租赁流程：
1️⃣ 选择能量套餐
2️⃣ 输入接收地址
3️⃣ 确认订单信息
4️⃣ 完成支付
5️⃣ 等待能量到账

💡 注意事项：
• 请确保TRON地址正确
• 支付后请耐心等待确认
• 能量有效期为24小时

🆘 如需帮助，请联系客服
















能量池管理 也就是账户管理和质押管理 我有点没有头绪 我的想法是你可以根据官方提供的 API，在后台补充 API 的界面 涉及到的所有 API 全部放在页面上 方便我更好的理解和测试  
机器人管理也是 涉及到的所有相关 API 参考官方文档 详细列出




目前管理后台有看到三块关于价格的配置：
1.价格配置
2.能量包管理
3.系统设置-定价设置

这三块逻辑是有问题的重复性太高了，我需要你重构一下，基于我的需求，请你再当前的基础上要重新完善一下，需求如下：
我们对于 telegram 可能付费的用户，其实他们就是进入机器人后可以选择 能量闪租”（【⚡️能量闪租】
🔸转账  2.6 Trx=  1 笔能量
🔸转账  5.2 Trx=  2 笔能量

单笔 2.6 Trx，以此类推，最大 5 笔
1.向无U地址转账，需要双倍能量。
2.请在1小时内转账，否则过期回收。

🔸闪租能量收款地址:
TWdcgk9NEsV1nt5yPrNfSYktbA12345678）“也就是我们后台配置单笔的价格，这是一种情况，另外一种情况就是：笔数套餐”（🔥笔数套餐🔥（无时间限制）
（24小时不使用，则扣一笔占用费）

🔺对方有U没U都是扣除一笔转账
🔺转移笔数到其他地址请联系客服
🔺为他人购买，填写他人地址即可

⚠️笔数开/关按钮，可查询账单，开/关笔数））“我们后台配置不同的笔数套餐价格

而用户看到的这个能量闪租和笔数套餐 我们是在 telegram 机器人里面可以进行配置关联的






系统设置-基础设置没有问题，但是现在系统设置里面的 安全设置 通知设置 定价设置 高级设置 修改后无效，请确保页面展示的和数据库的字段是想对应的，同时要确保可以正常修改和保存；修改和保存可以参考基础设置的保存的相关的逻辑，只要有数据变更我再system_config_history表里面可以看到 而且页面数据有成功保存 刷新后也正常获取






我们目前是用户管理里面分为三种角色：普通用户 代理商 管理员
这样是有点问题的，比如
1.用户管理 里面应该对应的只有这三种角色： 普通用户 套餐用户 VIP 用户： 其实就是使用某个 telegram 机器人（有可能是我们系统的 也有可能是某个代理商）的时候生成的 角色可以是普通用户 套餐用户 VIP用户
2.代理商：我们应该有一个单独的 代理商管理 来实现添加代理商 这个代理商是可以关联到某个telegram 机器人来单独核算的 代理商可以设置自己 我们可以给代理商分配采购的价格 代理商可以也可以设置自己对外的价格 就是机器人相关的设置了
3.管理员 应该也要有个单独的菜单来做 管理员主要就是用来管理我们后台的  当然也可以分成不同的角色









用户管理 要看到：
1.telegram_id： 我看数据库已经有了 （获取 telegram 要在 telegram 机器人上使用到这个用户名）
2.用户余额：要有 USDT余额和 TRX 余额
3.用户角色：分为 普通用户 代理商 管理员；我看添加用户的时候角色是普通用户 VIP 用户 代理商 ，但是搜索框所有角色那边选择是对的

请修复，同时确保用户管理列表能正常看到现有的所有用户




1.代码拆分
请你检查项目文件代码行数超过 300 的文件，对有必要的文件进行安全分离这个文件，将其拆分为多个模块，保持原有功能不变 生成一份详情的清单 md 文档
2.代码清理
请你安全清理一下 根目录下 一些测试文件 以后也不会用到的 如果会用到的话就归类放好 不会用的安全移除掉 确保不要影响到现有项目的功能实现 

2.数据库查询 N+1 看看有没有
见 
2.管理后台所有接口相关测试
3.功能开发：机器人 TRON等

redis+缓存

性能+安全


npm run check 


=== 登录信息 ===
✅ 可以使用以下信息登录:
邮箱: admin@tronrental.com
密码: admin123456 (默认密码)







DONE：
A1：
请确保安全移除价格相关的旧表和代码 
注意：我不要看到目录结构下有关于 supabase （如果有，请安全删除）的，我们数据库用的是本地的数据库，配置信息看根目录下的.env文件：psql postgresql://postgres:postgres@localhost:5432/tron_energy_rental
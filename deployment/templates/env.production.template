# TRON能量租赁系统 - 生产环境配置模板
# 作者: 系统管理员
# 描述: 生产环境的环境变量配置模板

# ========================================
# 基础配置
# ========================================
NODE_ENV=production
PORT=3001
TZ=Asia/Shanghai

# ========================================
# 数据库配置
# ========================================
# PostgreSQL数据库连接
DB_HOST=localhost
DB_PORT=5432
DB_NAME=tron_energy_rental
DB_USER=tron_user
DB_PASSWORD=your_secure_password_here
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=20

# 数据库连接字符串 (可选，优先级高于单独配置)
# DATABASE_URL=postgresql://tron_user:password@localhost:5432/tron_energy_rental

# ========================================
# Redis配置
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0
REDIS_CLUSTER=false

# Redis连接字符串 (可选)
# REDIS_URL=redis://localhost:6379/0

# ========================================
# JWT认证配置
# ========================================
# JWT密钥 (必须修改为强密码)
JWT_SECRET=your_super_secure_jwt_secret_key_here_minimum_32_characters
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ========================================
# 加密配置
# ========================================
# 数据加密密钥
ENCRYPTION_KEY=your_encryption_key_32_chars_min
# 密码盐轮数
BCRYPT_ROUNDS=12

# ========================================
# TRON网络配置
# ========================================
# TRON网络类型 (mainnet/testnet)
TRON_NETWORK=mainnet
# TRON节点地址
TRON_FULL_NODE=https://api.trongrid.io
TRON_SOLIDITY_NODE=https://api.trongrid.io
TRON_EVENT_SERVER=https://api.trongrid.io
# TRON API密钥
TRON_API_KEY=your_tron_api_key_here

# 钱包配置
TRON_PRIVATE_KEY=your_tron_private_key_here
TRON_WALLET_ADDRESS=your_tron_wallet_address_here

# ========================================
# Telegram机器人配置
# ========================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/telegram/webhook
TELEGRAM_ADMIN_CHAT_ID=your_admin_chat_id

# ========================================
# 支付配置
# ========================================
# 支付网关配置
PAYMENT_GATEWAY=tron
PAYMENT_WEBHOOK_SECRET=your_payment_webhook_secret

# 汇率配置
EXCHANGE_RATE_API_KEY=your_exchange_rate_api_key
EXCHANGE_RATE_UPDATE_INTERVAL=300000

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info
LOG_FILE_PATH=/var/log/tron-energy-rental/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# ========================================
# 邮件配置 (可选)
# ========================================
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@domain.com
SMTP_PASSWORD=your_email_password
EMAIL_FROM=noreply@your-domain.com

# ========================================
# 监控和性能配置
# ========================================
# 启用性能监控
ENABLE_METRICS=true
METRICS_PORT=9090

# 启用健康检查
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_INTERVAL=30000

# 请求限制
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# 安全配置
# ========================================
# CORS配置
CORS_ORIGIN=https://your-domain.com
CORS_CREDENTIALS=true

# 安全头部
ENABLE_HELMET=true
ENABLE_CSRF=true

# API密钥 (可选)
API_KEY=your_api_key_for_external_services

# ========================================
# 缓存配置
# ========================================
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# ========================================
# 文件上传配置
# ========================================
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ========================================
# 第三方服务配置
# ========================================
# 短信服务 (可选)
SMS_PROVIDER=aliyun
SMS_ACCESS_KEY=your_sms_access_key
SMS_SECRET_KEY=your_sms_secret_key
SMS_TEMPLATE_ID=your_sms_template_id

# 对象存储 (可选)
OSS_ENDPOINT=your_oss_endpoint
OSS_ACCESS_KEY_ID=your_oss_access_key
OSS_ACCESS_KEY_SECRET=your_oss_secret_key
OSS_BUCKET=your_bucket_name

# ========================================
# 定时任务配置
# ========================================
SCHEDULER_ENABLED=true
SCHEDULER_TIMEZONE=Asia/Shanghai

# 能量池更新任务
ENERGY_POOL_UPDATE_CRON=0 */5 * * * *
# 订单状态检查任务
ORDER_STATUS_CHECK_CRON=0 */2 * * * *
# 价格更新任务
PRICE_UPDATE_CRON=0 0 */1 * * *

# ========================================
# 开发和调试配置 (生产环境应关闭)
# ========================================
DEBUG=false
ENABLE_SWAGGER=false
ENABLE_PROFILING=false

# ========================================
# 应用特定配置
# ========================================
# 最小能量租赁数量
MIN_ENERGY_AMOUNT=1000
# 最大能量租赁数量
MAX_ENERGY_AMOUNT=1000000
# 默认租赁时长 (小时)
DEFAULT_RENTAL_DURATION=24

# 手续费配置
TRANSACTION_FEE_RATE=0.01
MIN_TRANSACTION_FEE=1

# 用户等级配置
ENABLE_USER_LEVELS=true
VIP_DISCOUNT_RATE=0.1

# ========================================
# 备份配置
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/tron-energy-rental

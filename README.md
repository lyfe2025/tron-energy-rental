# TRON èƒ½é‡ç§Ÿèµç³»ç»Ÿ

<div align="center">

![TRON Energy Rental](https://img.shields.io/badge/TRON-Energy%20Rental-red?style=for-the-badge&logo=tron)
![Vue 3](https://img.shields.io/badge/Vue-3.4.15+-4FC08D?style=for-the-badge&logo=vue.js)
![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=for-the-badge&logo=node.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.3+-3178C6?style=for-the-badge&logo=typescript)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-12+-336791?style=for-the-badge&logo=postgresql)
![Redis](https://img.shields.io/badge/Redis-6+-DC382D?style=for-the-badge&logo=redis)

**åŸºäº TRON 2.0 è´¨æŠ¼æœºåˆ¶çš„ä¸“ä¸šèƒ½é‡ç§Ÿèµå¹³å°**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ [æ•°æ®åº“å¤‡ä»½æ¢å¤](#-æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤) â€¢ [API æ–‡æ¡£](#-api-æ–‡æ¡£) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

TRON èƒ½é‡ç§Ÿèµç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº TRON 2.0 è´¨æŠ¼æœºåˆ¶çš„ä¸“ä¸šèƒ½é‡ç§Ÿèµå¹³å°ï¼Œä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„ TRX è´¨æŠ¼ã€èƒ½é‡ä»£ç†ã€è®¢å•ç®¡ç†ç­‰æœåŠ¡ã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæ¶æ„ï¼Œæ”¯æŒå¤šç½‘ç»œé…ç½®ï¼Œå…·å¤‡å®Œå–„çš„ç®¡ç†åå°å’Œ Telegram æœºå™¨äººé›†æˆã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **ä¸“ä¸šè´¨æŠ¼æœåŠ¡**: åŸºäº TRON 2.0 å®˜æ–¹è´¨æŠ¼æœºåˆ¶ï¼Œå®‰å…¨å¯é 
- **æ™ºèƒ½èƒ½é‡ç®¡ç†**: è‡ªåŠ¨åŒ–èƒ½é‡åˆ†é…å’Œå›æ”¶ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡
- **å¤šæ¸ é“æ¥å…¥**: æ”¯æŒ Web ç•Œé¢å’Œ Telegram æœºå™¨äººæ“ä½œ
- **å®Œå–„çš„ä»£ç†ç³»ç»Ÿ**: å¤šçº§ä»£ç†ä½£é‡‘åˆ†é…ï¼Œæ”¯æŒä¸šåŠ¡æ‹“å±•
- **å®æ—¶ç›‘æ§ç»Ÿè®¡**: å…¨æ–¹ä½çš„æ•°æ®åˆ†æå’Œä¸šåŠ¡ç›‘æ§

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½

- **TRX è´¨æŠ¼ç®¡ç†**
  - æ”¯æŒèƒ½é‡å’Œå¸¦å®½è´¨æŠ¼
  - æ‰¹é‡è´¨æŠ¼æ“ä½œ
  - 14å¤©è§£å†»æœŸç®¡ç†
  - è‡ªåŠ¨æå–åˆ°æœŸèµ„é‡‘

- **èƒ½é‡ä»£ç†æœåŠ¡**
  - çµæ´»çš„å§”æ‰˜ç­–ç•¥
  - å®æ—¶å§”æ‰˜çŠ¶æ€è·Ÿè¸ª
  - å§”æ‰˜æ”¶ç›Šç»Ÿè®¡
  - æ‰¹é‡å§”æ‰˜æ“ä½œ

- **è®¢å•ç®¡ç†ç³»ç»Ÿ**
  - å®Œæ•´çš„è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - å¤šç§æ”¯ä»˜æ–¹å¼æ”¯æŒ
  - è®¢å•çŠ¶æ€å®æ—¶æ›´æ–°
  - è‡ªåŠ¨åŒ–è®¢å•å¤„ç†

### ğŸ¤– æ™ºèƒ½åŒ–åŠŸèƒ½

- **å¤šæœºå™¨äººç®¡ç†ç³»ç»Ÿ**
  - æ”¯æŒå¤šä¸ªTelegramæœºå™¨äººåŒæ—¶è¿è¡Œ
  - æ™ºèƒ½è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
  - å®æ—¶æœºå™¨äººçŠ¶æ€ç›‘æ§
  - åŠ¨æ€æœºå™¨äººé…ç½®ç®¡ç†

- **Telegram æœºå™¨äººé›†ç¾¤**
  - 24/7 è‡ªåŠ¨åŒ–æœåŠ¡
  - å¤šè¯­è¨€æ”¯æŒ
  - å®æ—¶é€šçŸ¥æ¨é€
  - ä¾¿æ·çš„å‘½ä»¤æ“ä½œ
  - Webhookå’Œé•¿è½®è¯¢åŒæ¨¡å¼

- **ä»£ç†ç³»ç»Ÿ**
  - å¤šçº§ä»£ç†ä½£é‡‘
  - å®æ—¶æ”¶ç›Šç»Ÿè®¡
  - ä»£ç†å•†ç®¡ç†åå°
  - æ¨å¹¿é“¾æ¥ç”Ÿæˆ

- **ç›‘æ§ä¸ç»Ÿè®¡**
  - å®æ—¶ä¸šåŠ¡æ•°æ®ç›‘æ§
  - è¯¦ç»†çš„è´¢åŠ¡æŠ¥è¡¨
  - ç³»ç»Ÿæ€§èƒ½ç›‘æ§
  - å¼‚å¸¸å‘Šè­¦æœºåˆ¶
  - ç¼“å­˜ç³»ç»Ÿç›‘æ§
  - æ•°æ®åº“æ€§èƒ½ç›‘æ§

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **å¤šé‡å®‰å…¨éªŒè¯**
- **æ•°æ®åŠ å¯†å­˜å‚¨**
- **API è®¿é—®é™æµ**
- **æ“ä½œæ—¥å¿—å®¡è®¡**
- **èµ„é‡‘å®‰å…¨ä¿éšœ**

### ğŸš€ å¼€å‘ä½“éªŒä¼˜åŒ–

- **å¿«é€Ÿå®‰è£…**: é¢„é…ç½®é•œåƒæºï¼Œä¾èµ–å®‰è£…ä»…éœ€2ç§’
- **æ™ºèƒ½æç¤º**: å®‰è£…è¿‡ç¨‹æ˜¾ç¤ºå‹å¥½çš„è¿›åº¦æç¤º
- **ä¸€é”®ç®¡ç†**: æä¾›ä¾¿æ·çš„é•œåƒæºåˆ‡æ¢è„šæœ¬
- **ç½‘ç»œä¼˜åŒ–**: å†…ç½®é‡è¯•æœºåˆ¶ç¡®ä¿å®‰è£…ç¨³å®šæ€§

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3.4.15+ + TypeScript 5.3+
- **æ„å»ºå·¥å…·**: Vite 5.0.12+
- **UI ç»„ä»¶**: Element Plus 2.11+
- **çŠ¶æ€ç®¡ç†**: Pinia 3.0+
- **è·¯ç”±ç®¡ç†**: Vue Router 4.2+
- **æ ·å¼æ¡†æ¶**: Tailwind CSS 3.4+
- **å›¾è¡¨åº“**: ECharts 6.0+ / Recharts 3.1+
- **HTTP å®¢æˆ·ç«¯**: Axios 1.6+
- **å›¾æ ‡åº“**: Lucide Vue Next 0.511+
- **å·¥å…·åº“**: Lodash ES 4.17+, Clsx 2.1+

### åç«¯æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶**: Node.js 18+ / TypeScript 5.3+
- **æ¡†æ¶**: Express.js 4.21+ + TypeScript
- **æ•°æ®åº“**: PostgreSQL 12+ (pg 8.11+)
- **ç¼“å­˜**: Redis 6+ (ioredis 5.7+ / redis 4.6+)
- **åŒºå—é“¾**: TronWeb 6.0+ SDK
- **èº«ä»½éªŒè¯**: JWT (jsonwebtoken 9.0+)
- **æ•°æ®éªŒè¯**: Joi 17.11+ + Express Validator 7.2+
- **æ—¥å¿—ç³»ç»Ÿ**: Winston 3.17+ (winston-daily-rotate-file 5.0+)
- **è¿›ç¨‹ç®¡ç†**: PM2 (ecosystem.config.cjs)
- **å®šæ—¶ä»»åŠ¡**: Node-cron 4.2+
- **æ¶ˆæ¯æ¨é€**: Telegram Bot API (node-telegram-bot-api 0.66+)
- **ç³»ç»Ÿç›‘æ§**: Systeminformation 5.27+
- **åŠ å¯†å®‰å…¨**: Bcrypt 6.0+, Bcryptjs 2.4+

### åŸºç¡€è®¾æ–½

- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åå‘ä»£ç†**: Nginx
- **ç›‘æ§**: ç³»ç»Ÿèµ„æºç›‘æ§
- **éƒ¨ç½²**: ä¼ ç»Ÿéƒ¨ç½² + å®¹å™¨åŒ–éƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

#### åŸºç¡€ç¯å¢ƒ
- **Node.js** >= 18.0.0 (æ¨è 18.19+ LTS)
- **PostgreSQL** >= 12.0 (æ¨è 13+ï¼Œæ— éœ€é¢å¤–æ‰©å±•)
- **Redis** >= 6.0 (ç”¨äºç¼“å­˜å’Œä¼šè¯å­˜å‚¨)
- **Git** (ç”¨äºä»£ç ç®¡ç†)
- **pnpm** >= 8.0.0 (æ¨è) æˆ– **npm** >= 9.0.0

#### ç³»ç»Ÿè¦æ±‚
- **å†…å­˜**: æœ€å° 2GBï¼Œæ¨è 4GB+
- **ç£ç›˜ç©ºé—´**: æœ€å° 10GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆç”¨äºTRONåŒºå—é“¾APIè°ƒç”¨ï¼‰

#### ç”Ÿäº§ç¯å¢ƒæ¨è
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 8+ / Debian 11+
- **è¿›ç¨‹ç®¡ç†å™¨**: PM2 (å·²åŒ…å«é…ç½®)
- **åå‘ä»£ç†**: Nginx (é…ç½®æ–‡ä»¶å·²æä¾›)
- **SSLè¯ä¹¦**: Let's Encrypt æˆ–å•†ä¸šè¯ä¹¦

### é•œåƒæºé…ç½®

é¡¹ç›®å·²é¢„é…ç½®æ·˜å®é•œåƒæºä»¥æé«˜å›½å†…ç”¨æˆ·çš„ä¾èµ–å®‰è£…é€Ÿåº¦ï¼š

- **é»˜è®¤é•œåƒæº**: `https://registry.npmmirror.com/` (æ·˜å®é•œåƒ)
- **é…ç½®æ–‡ä»¶**: `.npmrc` (é¡¹ç›®æ ¹ç›®å½•)
- **å®‰è£…æç¤º**: è‡ªåŠ¨æ˜¾ç¤ºå®‰è£…è¿›åº¦å’Œå®Œæˆæç¤º
- **ç½‘ç»œä¼˜åŒ–**: å†…ç½®é‡è¯•æœºåˆ¶å’Œè¶…æ—¶é…ç½®

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd tron-energy-rental
   ```

2. **æ£€æŸ¥é•œåƒæºé…ç½®**
   ```bash
   # æ£€æŸ¥å½“å‰é•œåƒæºï¼ˆé¡¹ç›®å·²é¢„é…ç½®æ·˜å®é•œåƒæºï¼‰
   npm run registry:check
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   # ä½¿ç”¨ pnpm (æ¨èï¼Œçº¦2ç§’å®Œæˆ)
   pnpm install
   
   # æˆ–ä½¿ç”¨ npm
   npm install
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
   cp .env .env.local  # ç”¨äºæœ¬åœ°å¼€å‘
   
   # ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®ä½ çš„ç¯å¢ƒä¿®æ”¹ä»¥ä¸‹å…³é”®é…ç½®ï¼š
   # - æ•°æ®åº“è¿æ¥ä¿¡æ¯
   # - Redisé…ç½®
   # - JWTå¯†é’¥
   # - ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
   # - TRONç½‘ç»œé…ç½®
   ```
   
   **é‡è¦é…ç½®é¡¹è¯´æ˜ï¼š**
   ```bash
   # æ•°æ®åº“é…ç½®ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
   DATABASE_URL=postgresql://postgres:your_password@localhost:5432/tron_energy_rental
   
   # å®‰å…¨é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
   JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
   ADMIN_PASSWORD=your-secure-admin-password
   
   # æœåŠ¡ç«¯å£é…ç½®
   PORT=3001          # åç«¯APIç«¯å£
   VITE_PORT=5173     # å‰ç«¯å¼€å‘æœåŠ¡å™¨ç«¯å£
   ```

5. **æ•°æ®åº“åˆå§‹åŒ–**
   ```bash
   # åˆ›å»ºæ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
   pnpm run db:create
   
   # è¿è¡Œæ•°æ®åº“è¿ç§»
   pnpm run migrate
   
   # éªŒè¯æ•°æ®åº“è¿æ¥
   psql postgresql://postgres:postgres@localhost:5432/tron_energy_rental -c "SELECT version();"
   ```
   
   **æ³¨æ„**: æœ¬é¡¹ç›®çš„PostgreSQLé…ç½®**ä¸éœ€è¦ä»»ä½•æ‰©å±•**ï¼Œä½¿ç”¨æ ‡å‡†PostgreSQLåŠŸèƒ½å³å¯ã€‚

6. **å¯åŠ¨å¼€å‘æœåŠ¡**
   ```bash
   # åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
   pnpm run dev
   
   # æˆ–åˆ†åˆ«å¯åŠ¨
   pnpm run client:dev  # å‰ç«¯ (ç«¯å£ 5173)
   pnpm run server:dev  # åç«¯ (ç«¯å£ 3001)
   ```

7. **è®¿é—®åº”ç”¨**
   - **å‰ç«¯ç•Œé¢**: http://localhost:5173
   - **åç«¯ API**: http://localhost:3001/api
   - **APIæ–‡æ¡£**: http://localhost:3001/api (æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ç«¯ç‚¹)
   - **å¥åº·æ£€æŸ¥**: http://localhost:3001/api/health
   - **ç®¡ç†å‘˜è´¦æˆ·**: admin@tronrental.com / admin123456
   
   **é¦–æ¬¡ç™»å½•åå»ºè®®ï¼š**
   ```bash
   # æµ‹è¯•APIè¿æ¥
   curl -s -X POST http://localhost:3001/api/auth/login \
     -H "Content-Type: application/json" \
     -d '{"email":"admin@tronrental.com","password":"admin123456"}' | jq .
   
   # æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
   curl http://localhost:3001/api/health
   ```

### ğŸ”„ å¿«é€Ÿé‡å¯

```bash
# ä¸€é”®é‡å¯æ‰€æœ‰æœåŠ¡ï¼ˆè‡ªåŠ¨æ¸…ç†è¿›ç¨‹ï¼‰
pnpm run restart

# æ‰‹åŠ¨åœæ­¢ç°æœ‰æœåŠ¡åé‡å¯
ps aux | grep -E 'tron-energy-rental|tsx.*server\.ts|vite.*5173' | grep -v grep | awk '{print $2}' | xargs kill -9 2>/dev/null || true
pnpm run dev
```

### ğŸ“¦ é•œåƒæºç®¡ç†

é¡¹ç›®å·²é¢„é…ç½®å›½å†…é•œåƒæºä»¥åŠ é€Ÿä¾èµ–å®‰è£…ã€‚å¦‚éœ€åˆ‡æ¢é•œåƒæºï¼š

```bash
# æ£€æŸ¥å½“å‰é•œåƒæº
npm run registry:check

# åˆ‡æ¢åˆ°æ·˜å®é•œåƒæºï¼ˆå›½å†…æ¨èï¼Œé»˜è®¤é…ç½®ï¼‰
npm run registry:taobao

# åˆ‡æ¢åˆ°npmå®˜æ–¹é•œåƒæºï¼ˆæµ·å¤–æˆ–å…¬å¸ç¯å¢ƒï¼‰
npm run registry:npm

# é‡ç½®é•œåƒæºé…ç½®åˆ°ç³»ç»Ÿé»˜è®¤
npm run registry:reset
```

**é•œåƒæºè¯´æ˜ï¼š**
- **æ·˜å®é•œåƒæº**: `https://registry.npmmirror.com/` (å›½å†…ç½‘ç»œä¼˜åŒ–)
- **å®˜æ–¹é•œåƒæº**: `https://registry.npmjs.org/` (æµ·å¤–ç½‘ç»œ)
- **è‡ªåŠ¨é‡è¯•**: å†…ç½®ç½‘ç»œè¶…æ—¶é‡è¯•æœºåˆ¶
- **ç¼“å­˜ä¼˜åŒ–**: æ”¯æŒæœ¬åœ°ç¼“å­˜åŠ é€Ÿåç»­å®‰è£…

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒ API ç«¯ç‚¹

- **è®¤è¯ç›¸å…³**: `/api/auth/*`
- **è´¨æŠ¼ç®¡ç†**: `/api/energy-pool/stake/*`
- **èƒ½é‡æ± ç®¡ç†**: `/api/energy-pool/*`, `/api/energy-pools-extended/*`
- **è®¢å•ç®¡ç†**: `/api/orders/*`
- **ç”¨æˆ·ç®¡ç†**: `/api/users/*`, `/api/user-levels/*`
- **ä»£ç†ç³»ç»Ÿ**: `/api/agents/*`
- **ç»Ÿè®¡æ•°æ®**: `/api/statistics/*`
- **ç³»ç»Ÿç®¡ç†**: `/api/system/*`, `/api/system-configs/*`
- **æœºå™¨äººç®¡ç†**: `/api/bots/*`, `/api/multi-bot/*`
- **Telegramé›†æˆ**: `/api/telegram/*`, `/api/telegram-bot-notifications/*`
- **TRONç½‘ç»œ**: `/api/tron/*`, `/api/tron-networks/*`
- **æ”¯ä»˜ç³»ç»Ÿ**: `/api/payment/*`
- **ä»·æ ¼é…ç½®**: `/api/price-configs/*`
- **ç›‘æ§ç³»ç»Ÿ**: `/api/monitoring/*`, `/api/network-logs/*`
- **é…ç½®ç¼“å­˜**: `/api/config-cache/*`
- **æ–‡ä»¶ä¸Šä¼ **: `/api/uploads/*`
- **è°ƒåº¦ä»»åŠ¡**: `/api/scheduler/*`

### API ä½¿ç”¨ç¤ºä¾‹

```bash
# ç”¨æˆ·ç™»å½•
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@tronrental.com","password":"admin123456"}'

# è·å–è´¨æŠ¼æ¦‚è§ˆ
curl -X GET http://localhost:3001/api/energy-pool/stake/overview \
  -H "Authorization: Bearer <your-token>"

# å¥åº·æ£€æŸ¥
curl -X GET http://localhost:3001/api/health

# è·å–APIç«¯ç‚¹åˆ—è¡¨
curl -X GET http://localhost:3001/api
```

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ: [docs/è´¨æŠ¼ç®¡ç†ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£.md](./docs/è´¨æŠ¼ç®¡ç†ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£.md)

## ğŸ³ éƒ¨ç½²æŒ‡å—

### ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šPM2éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **ç¯å¢ƒå‡†å¤‡**
   ```bash
   # å®‰è£…å…¨å±€ä¾èµ–
   npm install -g pm2 pnpm
   
   # å…‹éš†é¡¹ç›®
   git clone <your-repo-url> /var/www/tron-energy-rental
   cd /var/www/tron-energy-rental
   ```

2. **å®‰è£…ä¾èµ–å’Œæ„å»º**
   ```bash
   # å®‰è£…ä¾èµ–
   pnpm install
   
   # æ„å»ºå‰ç«¯
   pnpm run build
   
   # é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰
   cp .env .env.production
   nano .env.production  # ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®
   ```

3. **æ•°æ®åº“åˆå§‹åŒ–**
   ```bash
   # åˆ›å»ºæ•°æ®åº“
   pnpm run db:create
   
   # è¿è¡Œè¿ç§»
   pnpm run migrate
   ```

4. **å¯åŠ¨æœåŠ¡ï¼ˆPM2ï¼‰**
   ```bash
   # ä½¿ç”¨PM2å¯åŠ¨æœåŠ¡
   pm2 start ecosystem.config.cjs --env production
   
   # ä¿å­˜PM2é…ç½®
   pm2 save
   pm2 startup
   
   # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
   pm2 status
   pm2 logs
   ```

#### æ–¹å¼äºŒï¼šå®å¡”é¢æ¿éƒ¨ç½²

1. **ä¸€é”®å®‰è£…è„šæœ¬**
   ```bash
   # ä¸‹è½½å¹¶è¿è¡Œå®å¡”å®‰è£…è„šæœ¬
   wget https://raw.githubusercontent.com/your-repo/main/deployment/scripts/install.sh
   chmod +x install.sh
   sudo ./install.sh
   ```

2. **æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤**
   - å‚è€ƒ: [deployment/å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—.md](./deployment/å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—.md)
   - åŒ…å«å®Œæ•´çš„å®å¡”é¢æ¿é…ç½®è¯´æ˜

### ğŸ”§ Nginxé…ç½®

é¡¹ç›®æä¾›äº†å®Œæ•´çš„Nginxé…ç½®æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶Nginxé…ç½®
cp deployment/configs/nginx-same-server.conf /etc/nginx/sites-available/tron-energy-rental
ln -s /etc/nginx/sites-available/tron-energy-rental /etc/nginx/sites-enabled/

# ä¿®æ”¹é…ç½®ä¸­çš„åŸŸå
nano /etc/nginx/sites-available/tron-energy-rental

# æµ‹è¯•å¹¶é‡è½½Nginx
nginx -t
systemctl reload nginx
```

### ğŸ“Š PM2é…ç½®è¯´æ˜

é¡¹ç›®ä½¿ç”¨ä¼˜åŒ–çš„PM2é…ç½® (`ecosystem.config.cjs`)ï¼š

- **æ‰§è¡Œæ¨¡å¼**: Forkæ¨¡å¼ï¼Œå•å®ä¾‹ä¼˜åŒ–
- **å†…å­˜ç®¡ç†**: è‡ªåŠ¨é‡å¯å½“å†…å­˜è¶…è¿‡1.5GB
- **æ—¥å¿—ç®¡ç†**: åˆ†ç¦»çš„é”™è¯¯å’Œè¾“å‡ºæ—¥å¿—
- **å¥åº·æ£€æŸ¥**: 30ç§’é—´éš”çš„åº”ç”¨ç›‘æ§
- **æ€§èƒ½ä¼˜åŒ–**: Node.jsè¿è¡Œæ—¶å‚æ•°è°ƒä¼˜

**å¸¸ç”¨PM2å‘½ä»¤ï¼š**
```bash
# æœåŠ¡ç®¡ç†
pm2 start ecosystem.config.cjs --env production
pm2 restart tron-energy-api
pm2 stop tron-energy-api
pm2 delete tron-energy-api

# ç›‘æ§å’Œæ—¥å¿—
pm2 status
pm2 monit
pm2 logs tron-energy-api
pm2 logs tron-energy-api --lines 100

# é…ç½®ç®¡ç†
pm2 save
pm2 startup  # å¼€æœºè‡ªå¯
pm2 reload ecosystem.config.cjs  # é›¶åœæœºé‡è½½
```

### ğŸ›¡ï¸ å®‰å…¨é…ç½®

**ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹çš„é…ç½®ï¼š**
```bash
# .env.production ä¸­çš„å…³é”®é…ç½®
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
SESSION_SECRET=your-session-secret-change-this-to-random-string
CSRF_SECRET=your-csrf-secret-change-this-to-random-string
ADMIN_PASSWORD=change-this-default-password
DB_PASSWORD=change-this-database-password
REDIS_PASSWORD=set-redis-password-if-needed
```

### ğŸ“ éƒ¨ç½²é…ç½®æ–‡ä»¶

- **PM2é…ç½®**: `ecosystem.config.cjs` (å·²ä¼˜åŒ–çš„ç”Ÿäº§é…ç½®)
- **Nginxé…ç½®**: `deployment/configs/nginx-same-server.conf`
- **ç¯å¢ƒæ¨¡æ¿**: é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶
- **å®‰è£…è„šæœ¬**: `deployment/scripts/install.sh` (å®å¡”é¢æ¿)
- **éƒ¨ç½²è„šæœ¬**: `deployment/scripts/deploy.sh`

### ğŸ” éƒ¨ç½²éªŒè¯

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status
curl http://localhost:3001/api/health

# æ£€æŸ¥å‰ç«¯è®¿é—®
curl -I http://your-domain.com

# è¿è¡Œå¥åº·æ£€æŸ¥è„šæœ¬
./deployment/scripts/health-check.sh
```

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ: [deployment/README.md](./deployment/README.md)

## ğŸ’¾ æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤

### ğŸ“ å¤‡ä»½ç³»ç»Ÿæ¦‚è¿°

é¡¹ç›®æä¾›äº†å®Œå–„çš„æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤ç³»ç»Ÿï¼Œæ”¯æŒä¸¤ç§å¤‡ä»½æ ¼å¼ï¼š

#### ğŸ”§ åŒé‡å¤‡ä»½ç­–ç•¥

| å¤‡ä»½ç±»å‹ | æ–‡ä»¶åæ ¼å¼ | é€‚ç”¨åœºæ™¯ | ç‰¹ç‚¹ |
|---------|-----------|----------|------|
| **æ ‡å‡†ç‰ˆæœ¬** | `db_backup_tron_energy_rental_*.sql` | å®Œæ•´æ•°æ®åº“é‡å»º | åŒ…å« DROP/CREATE DATABASE è¯­å¥ |
| **Navicatå…¼å®¹ç‰ˆ** | `db_backup_navicat_*.sql` | å›¾å½¢åŒ–å·¥å…·å¯¼å…¥ | ä¸åŒ…å«æ•°æ®åº“åˆ›å»ºè¯­å¥ï¼Œæ›´å®‰å…¨ |

### ğŸš€ åˆ›å»ºæ•°æ®åº“å¤‡ä»½

#### ä½¿ç”¨é¡¹ç›®ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨ç»Ÿä¸€ç®¡ç†è„šæœ¬
./project.sh

# é€‰æ‹©æ“ä½œæµç¨‹ï¼š
# 7) æ•°æ®åº“ç®¡ç†
# 1) åˆ›å»ºæ–°å¤‡ä»½ï¼ˆå®Œæ•´ï¼‰      - ç”Ÿæˆæ ‡å‡†ç‰ˆæœ¬å¤‡ä»½
# 2) åˆ›å»ºNavicatå…¼å®¹å¤‡ä»½     - ç”Ÿæˆå›¾å½¢åŒ–å·¥å…·å…¼å®¹ç‰ˆæœ¬
```

#### ä½¿ç”¨ç‹¬ç«‹å¤‡ä»½è„šæœ¬

```bash
# æ ‡å‡†ç‰ˆæœ¬å¤‡ä»½
./scripts/database/backup-database.sh

# æŸ¥çœ‹å¤‡ä»½å†å²
ls -la backups/
```

### ğŸ”„ æ•°æ®åº“æ¢å¤æœ€ä½³å®è·µ

#### â­ æ¨èæ–¹æ¡ˆï¼šå‘½ä»¤è¡Œå¯¼å…¥ï¼ˆé€‚ç”¨æ‰€æœ‰åœºæ™¯ï¼‰

ç»è¿‡å¤§é‡æµ‹è¯•éªŒè¯ï¼Œ**å‘½ä»¤è¡Œå¯¼å…¥æ˜¯æœ€ç¨³å®šå¯é çš„æ–¹å¼**ï¼Œé€‚ç”¨äºï¼š
- âœ… å¼€å‘ç¯å¢ƒæ•°æ®æ¢å¤
- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- âœ… æ•°æ®åº“è¿ç§»
- âœ… ç¾éš¾æ¢å¤

**æ­¥éª¤è¯¦è§£ï¼š**

```bash
# 1. åˆ›å»ºç›®æ ‡æ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
psql postgresql://username:password@localhost:5432/postgres \
  -c "CREATE DATABASE your_target_database;"

# 2. ä½¿ç”¨æ ‡å‡†ç‰ˆæœ¬æ¢å¤ï¼ˆå®Œæ•´é‡å»ºï¼‰
psql postgresql://username:password@localhost:5432/postgres \
  -f backups/db_backup_tron_energy_rental_20250923_121841.sql

# 3. ä½¿ç”¨Navicatç‰ˆæœ¬æ¢å¤ï¼ˆå¯¼å…¥åˆ°ç°æœ‰æ•°æ®åº“ï¼‰
psql postgresql://username:password@localhost:5432/your_target_database \
  -f backups/db_backup_navicat_tron_energy_rental_20250923_121843.sql
```

**å®é™…æ“ä½œç¤ºä¾‹ï¼š**

```bash
# ä½¿ç”¨é¡¹ç›®é»˜è®¤ç”¨æˆ·æ¢å¤
psql postgresql://postgres:postgres@localhost:5432/postgres \
  -f backups/db_backup_navicat_tron_energy_rental_20250923_121843.sql

# éªŒè¯æ¢å¤ç»“æœ
psql postgresql://postgres:postgres@localhost:5432/tron_energy_rental \
  -c "SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public';"
```

#### ğŸ“Š å›¾å½¢åŒ–å·¥å…·ä½¿ç”¨æŒ‡å—

**é’ˆå¯¹ Navicat / pgAdmin ç”¨æˆ·çš„ç‰¹åˆ«è¯´æ˜ï¼š**

1. **ä¼˜å…ˆæ¨èï¼šå…ˆç”¨å‘½ä»¤è¡Œå¯¼å…¥ï¼Œå†ç”¨å›¾å½¢ç•Œé¢ç®¡ç†**
   ```bash
   # å…ˆå‘½ä»¤è¡Œå¯¼å…¥æ•°æ®
   psql -d your_database -f backup_file.sql
   
   # ç„¶åç”¨ Navicat è¿æ¥ç®¡ç†
   # äº«å—å›¾å½¢ç•Œé¢çš„ä¾¿åˆ©æ€§
   ```

2. **Navicat ç›´æ¥å¯¼å…¥çš„æ³¨æ„äº‹é¡¹**
   - âœ… ä½¿ç”¨ `db_backup_navicat_*.sql` æ–‡ä»¶
   - âš™ï¸ å¯¼å…¥è®¾ç½®ä¸­å‹¾é€‰"é‡åˆ°é”™è¯¯æ—¶ç»§ç»­"
   - ğŸ“ ç¡®ä¿ä½¿ç”¨ UTF-8 ç¼–ç 
   - ğŸ“‹ å»ºè®®åˆ†æ®µå¯¼å…¥å¤§æ–‡ä»¶

### ğŸ” æ¢å¤éªŒè¯å’Œæµ‹è¯•

```bash
# 1. æ£€æŸ¥è¡¨æ•°é‡
psql -d your_database -c "
SELECT COUNT(*) as table_count 
FROM information_schema.tables 
WHERE table_schema = 'public';"

# 2. æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
psql -d your_database -c "
SELECT 
  schemaname, 
  tablename, 
  n_tup_ins as insert_count,
  n_tup_upd as update_count
FROM pg_stat_user_tables 
ORDER BY tablename;"

# 3. æµ‹è¯•åº”ç”¨è¿æ¥
curl -s -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@tronrental.com","password":"admin123456"}' | jq .

# 4. æ£€æŸ¥å…³é”®åŠŸèƒ½
psql -d your_database -c "SELECT COUNT(*) FROM admins WHERE role = 'super_admin';"
```

### ğŸš¨ æ•…éšœæ’æŸ¥æŒ‡å—

#### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**1. Navicat å¯¼å…¥æŠ¥é”™ "syntax error at or near"**
```bash
# é—®é¢˜ï¼šå›¾å½¢åŒ–å·¥å…·å¯¹SQLæ ¼å¼ä¸¥æ ¼è§£æ
# è§£å†³ï¼šä½¿ç”¨å‘½ä»¤è¡Œå¯¼å…¥ï¼ˆæ¨èï¼‰
psql -d your_database -f backup_file.sql

# æˆ–è€…è°ƒæ•´ Navicat è®¾ç½®ï¼š
# - å‹¾é€‰"é‡åˆ°é”™è¯¯æ—¶ç»§ç»­"
# - ç¡®ä¿ç¼–ç ä¸º UTF-8
# - å°è¯•åˆ†æ®µå¯¼å…¥
```

**2. æƒé™ç›¸å…³é”™è¯¯**
```bash
# é—®é¢˜ï¼šå¤‡ä»½æ–‡ä»¶åŒ…å«ç‰¹å®šç”¨æˆ·çš„æ‰€æœ‰è€…ä¿¡æ¯
# è§£å†³ï¼šé¡¹ç›®å·²ä½¿ç”¨ --no-owner --no-privileges å‚æ•°ï¼Œæ— æ­¤é—®é¢˜

# éªŒè¯å¤‡ä»½å‚æ•°
grep -E "no-owner|no-privileges" scripts/core/database-manager.sh
```

**3. æ•°æ®åº“å·²å­˜åœ¨é”™è¯¯**
```bash
# æ ‡å‡†ç‰ˆæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼ŒNavicatç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨åˆ›å»º
CREATE DATABASE your_database_name WITH 
  TEMPLATE = template0 
  ENCODING = 'UTF8' 
  LOCALE = 'C';
```

### ğŸ“‹ å¤‡ä»½æ¢å¤æ£€æŸ¥æ¸…å•

**å¤‡ä»½å‰æ£€æŸ¥ï¼š**
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] å¤‡ä»½ç›®å½•æƒé™å……è¶³
- [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆå»ºè®®é¢„ç•™3å€æ•°æ®åº“å¤§å°ï¼‰

**æ¢å¤å‰æ£€æŸ¥ï¼š**
- [ ] å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§éªŒè¯
- [ ] ç›®æ ‡ç¯å¢ƒPostgreSQLç‰ˆæœ¬å…¼å®¹
- [ ] ç”¨æˆ·æƒé™é…ç½®æ­£ç¡®

**æ¢å¤åéªŒè¯ï¼š**
- [ ] è¡¨æ•°é‡æ­£ç¡®ï¼ˆé¢„æœŸï¼š41ä¸ªè¡¨ï¼‰
- [ ] ç®¡ç†å‘˜è´¦æˆ·å¯æ­£å¸¸ç™»å½•
- [ ] åº”ç”¨æœåŠ¡å¯åŠ¨æ­£å¸¸
- [ ] å…³é”®ä¸šåŠ¡åŠŸèƒ½æµ‹è¯•é€šè¿‡

### ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

```bash
# 1. å¤‡ä»½æ–‡ä»¶åŠ å¯†ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
gpg --symmetric --cipher-algo AES256 backup_file.sql
gpg --decrypt backup_file.sql.gpg > backup_file.sql

# 2. å®šæœŸå¤‡ä»½ç­–ç•¥
# æ·»åŠ åˆ° crontab
0 2 * * * /path/to/scripts/database/backup-database.sh
0 0 * * 0 find /path/to/backups -name "*.sql" -mtime +30 -delete

# 3. å¤‡ä»½å®Œæ•´æ€§éªŒè¯
scripts/database/verify-backup.sh backup_file.sql
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
tron-energy-rental/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # Vue ç»„ä»¶ (116ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶ (456ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/          # å‰ç«¯æœåŠ¡å±‚ (27ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ composables/       # Vueç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ router/            # è·¯ç”±é…ç½®
â”œâ”€â”€ api/                   # åç«¯æºç 
â”‚   â”œâ”€â”€ routes/            # APIè·¯ç”±å®šä¹‰ (è¦†ç›–æ‰€æœ‰ä¸šåŠ¡æ¨¡å—)
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚ (202ä¸ªæœåŠ¡æ–‡ä»¶)
â”‚   â”‚   â”œâ”€â”€ telegram-bot/  # Telegramæœºå™¨äººæœåŠ¡é›†ç¾¤
â”‚   â”‚   â”œâ”€â”€ tron/          # TRONåŒºå—é“¾æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ monitoring/    # ç³»ç»Ÿç›‘æ§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config-cache/  # é…ç½®ç¼“å­˜æœåŠ¡
â”‚   â”‚   â””â”€â”€ energy-pool/   # èƒ½é‡æ± ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶ (è®¤è¯ã€éªŒè¯ã€RBACç­‰)
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api/               # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ tron-api/          # TRON APIæ–‡æ¡£
â”‚   â”œâ”€â”€ telegram-bot-api/  # Telegramæœºå™¨äººAPIæ–‡æ¡£
â”‚   â””â”€â”€ DONE/              # å·²å®ŒæˆåŠŸèƒ½æ–‡æ¡£
â”œâ”€â”€ deployment/            # éƒ¨ç½²ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ scripts/           # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ configs/           # æœåŠ¡å™¨é…ç½®
â”‚   â”œâ”€â”€ docker/            # Dockeré…ç½®
â”‚   â””â”€â”€ templates/         # é…ç½®æ¨¡æ¿
â”œâ”€â”€ scripts/               # å„ç±»è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†å‘˜è„šæœ¬
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ development/       # å¼€å‘è„šæœ¬
â”‚   â””â”€â”€ maintenance/       # ç»´æŠ¤è„šæœ¬
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/              # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/       # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ e2e/               # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ fixtures/          # æµ‹è¯•æ•°æ®
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ backups/               # æ•°æ®åº“å¤‡ä»½
â””â”€â”€ public/                # é™æ€èµ„æº
    â”œâ”€â”€ uploads/           # ä¸Šä¼ æ–‡ä»¶
    â””â”€â”€ assets/            # é™æ€èµ„æº
```

### å¼€å‘è„šæœ¬

```bash
# ğŸš€ å¼€å‘æœåŠ¡
pnpm run dev               # åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯å¼€å‘æœåŠ¡å™¨
pnpm run client:dev        # ä»…å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 5173)
pnpm run server:dev        # ä»…å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3001)
pnpm run restart           # ä¸€é”®é‡å¯æ‰€æœ‰æœåŠ¡ï¼ˆè‡ªåŠ¨æ€æ­»æ—§è¿›ç¨‹ï¼‰

# ğŸ“¦ é•œåƒæºç®¡ç†ï¼ˆåŠ é€Ÿå›½å†…ä¾èµ–å®‰è£…ï¼‰
pnpm run registry:check    # æ£€æŸ¥å½“å‰é•œåƒæºé…ç½®
pnpm run registry:taobao   # åˆ‡æ¢åˆ°æ·˜å®é•œåƒæºï¼ˆå›½å†…æ¨èï¼‰
pnpm run registry:npm      # åˆ‡æ¢åˆ°npmå®˜æ–¹é•œåƒæºï¼ˆæµ·å¤–æ¨èï¼‰
pnpm run registry:reset    # é‡ç½®é•œåƒæºé…ç½®åˆ°é»˜è®¤

# ğŸ” ä»£ç è´¨é‡æ£€æŸ¥
pnpm run lint              # ESLint ä»£ç æ£€æŸ¥
pnpm run lint:fix          # è‡ªåŠ¨ä¿®å¤ESLinté”™è¯¯
pnpm run type-check        # å‰ç«¯TypeScriptç±»å‹æ£€æŸ¥
pnpm run type-check:api    # åç«¯TypeScriptç±»å‹æ£€æŸ¥
pnpm run check             # Vueç»„ä»¶ç±»å‹æ£€æŸ¥å’Œç¼–è¯‘éªŒè¯

# ğŸ§ª æµ‹è¯•ç›¸å…³
pnpm run test              # è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆç›‘å¬æ¨¡å¼ï¼‰
pnpm run test:run          # è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆå•æ¬¡æ‰§è¡Œï¼‰
pnpm run test:ui           # å¯åŠ¨æµ‹è¯•UIç•Œé¢
pnpm run test:coverage     # ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pnpm run test:unit         # è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test:integration  # è¿è¡Œé›†æˆæµ‹è¯•
pnpm run test:watch        # ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•

# ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†
pnpm run db:create         # åˆ›å»ºæ•°æ®åº“
pnpm run db:setup          # åˆ›å»ºæ•°æ®åº“å¹¶è¿è¡Œæ‰€æœ‰è¿ç§»
pnpm run migrate           # è¿è¡Œå¾…æ‰§è¡Œçš„è¿ç§»
pnpm run migrate:status    # æŸ¥çœ‹è¿ç§»çŠ¶æ€
pnpm run migrate:rollback  # å›æ»šæœ€åä¸€æ¬¡è¿ç§»
pnpm run migrate:sync      # åŒæ­¥è¿ç§»æ–‡ä»¶
pnpm run migrate:sync:dry  # å¹²è¿è¡ŒåŒæ­¥è¿ç§»ï¼ˆä¸æ‰§è¡Œï¼‰

# ğŸ’¾ æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤
# é¡¹ç›®æä¾›ç»Ÿä¸€çš„æ•°æ®åº“ç®¡ç†è„šæœ¬ï¼Œæ”¯æŒå¤‡ä»½ã€æ¢å¤ã€éªŒè¯ç­‰æ“ä½œ
./project.sh               # è¿›å…¥é¡¹ç›®ç®¡ç†è„šæœ¬ï¼Œé€‰æ‹©æ•°æ®åº“ç®¡ç†
scripts/database/backup-database.sh      # ç‹¬ç«‹å¤‡ä»½è„šæœ¬
scripts/database/restore-database.sh     # ç‹¬ç«‹æ¢å¤è„šæœ¬

# ğŸ—ï¸ æ„å»ºå’Œé¢„è§ˆ
pnpm run build             # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run preview           # é¢„è§ˆæ„å»ºç»“æœ

# ğŸ¯ PM2ç”Ÿäº§ç¯å¢ƒç®¡ç†
pnpm run pm2:start         # å¯åŠ¨PM2æœåŠ¡
pnpm run pm2:stop          # åœæ­¢PM2æœåŠ¡
pnpm run pm2:restart       # é‡å¯PM2æœåŠ¡
pnpm run pm2:reload        # é›¶åœæœºé‡è½½PM2æœåŠ¡
pnpm run pm2:status        # æŸ¥çœ‹PM2çŠ¶æ€
pnpm run pm2:logs          # æŸ¥çœ‹PM2æ—¥å¿—
pnpm run pm2:monit         # PM2ç›‘æ§ç•Œé¢

# ğŸ“ ä»£ç æ³¨é‡Šç®¡ç†
pnpm run comments:apply    # åº”ç”¨ä¸­æ–‡æ³¨é‡Š
pnpm run comments:verify   # éªŒè¯æ³¨é‡Šå®Œæ•´æ€§
pnpm run comments:setup    # è®¾ç½®æ³¨é‡Šç³»ç»Ÿ
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint å’Œ Prettier ä»£ç è§„èŒƒ
- ç»„ä»¶æ–‡ä»¶æ§åˆ¶åœ¨ 300 è¡Œä»¥å†…
- ä½¿ç”¨è¯­ä¹‰åŒ–çš„æäº¤ä¿¡æ¯
- ç¼–å†™å¿…è¦çš„å•å…ƒæµ‹è¯•

## ğŸ§ª æµ‹è¯•

#### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm run test

# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test:unit

# è¿è¡Œé›†æˆæµ‹è¯•
pnpm run test:integration

# ç›‘å¬æ¨¡å¼
pnpm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm run test:coverage

# æµ‹è¯•UIç•Œé¢
pnpm run test:ui
```

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”œâ”€â”€ e2e/                   # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ fixtures/              # æµ‹è¯•æ•°æ®
â”œâ”€â”€ mocks/                 # æ¨¡æ‹Ÿæ•°æ®
â”œâ”€â”€ setup/                 # æµ‹è¯•è®¾ç½®
â”œâ”€â”€ utils/                 # æµ‹è¯•å·¥å…·
â””â”€â”€ setup.ts               # å…¨å±€æµ‹è¯•é…ç½®
```

### æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

- **å…¨å±€è¦†ç›–ç‡**: 80%
- **åˆ†æ”¯è¦†ç›–ç‡**: 80%
- **å‡½æ•°è¦†ç›–ç‡**: 80%
- **è¯­å¥è¦†ç›–ç‡**: 80%

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—ç³»ç»Ÿ

- **æ—¥å¿—çº§åˆ«**: error, warn, info, debug
- **æ—¥å¿—æ–‡ä»¶**: 
  - åº”ç”¨æ—¥å¿—: `logs/app-YYYY-MM-DD.log`
  - åç«¯æ—¥å¿—: `logs/backend.log`
  - å‰ç«¯æ—¥å¿—: `logs/frontend.log`
  - æœºå™¨äººæ—¥å¿—: `logs/bots/`
- **æ—¥å¿—è½®è½¬**: æŒ‰æ—¥æœŸè‡ªåŠ¨è½®è½¬ï¼Œè‡ªåŠ¨æ¸…ç†ç­–ç•¥
- **ç»“æ„åŒ–æ—¥å¿—**: JSON æ ¼å¼ä¾¿äºåˆ†æ
- **æ—¥å¿—ç®¡ç†**: LogRotationManager ç»Ÿä¸€ç®¡ç†

### ç›‘æ§æŒ‡æ ‡

- **ç³»ç»Ÿèµ„æºç›‘æ§**
  - CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
  - ç½‘ç»œæµé‡å’Œè¿æ¥çŠ¶æ€
  - è¿›ç¨‹å¥åº·çŠ¶æ€

- **åº”ç”¨æ€§èƒ½ç›‘æ§**
  - API å“åº”æ—¶é—´
  - è¯·æ±‚æˆåŠŸç‡å’Œé”™è¯¯ç‡
  - å¹¶å‘è¿æ¥æ•°
  - æœåŠ¡å¯ç”¨æ€§

- **æ•°æ®åº“ç›‘æ§**
  - PostgreSQL è¿æ¥çŠ¶æ€
  - æŸ¥è¯¢æ€§èƒ½å’Œæ…¢æŸ¥è¯¢
  - æ•°æ®åº“é”å’Œæ­»é”

- **ç¼“å­˜ç›‘æ§**
  - Redis ç¼“å­˜å‘½ä¸­ç‡
  - å†…å­˜ä½¿ç”¨æƒ…å†µ
  - è¿æ¥æ± çŠ¶æ€

- **ä¸šåŠ¡ç›‘æ§**
  - è´¨æŠ¼æ“ä½œæˆåŠŸç‡
  - æœºå™¨äººæœåŠ¡çŠ¶æ€
  - è®¢å•å¤„ç†æ•ˆç‡
  - TRONç½‘ç»œè¿æ¥çŠ¶æ€

## ğŸš€ ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ

### ğŸ”’ å®‰å…¨é…ç½®æ¸…å•

#### å¿…é¡»ä¿®æ”¹çš„é…ç½®
```bash
# 1. æ•°æ®åº“å®‰å…¨
DB_PASSWORD="complex-password-with-symbols"
REDIS_PASSWORD="redis-secure-password"

# 2. åº”ç”¨å¯†é’¥ï¼ˆå¿…é¡»32å­—ç¬¦ä»¥ä¸Šï¼‰
JWT_SECRET="your-super-secure-jwt-secret-key-at-least-32-chars"
SESSION_SECRET="your-session-secret-change-this-random-string"
CSRF_SECRET="your-csrf-secret-change-this-random-string"

# 3. ç®¡ç†å‘˜è´¦æˆ·
ADMIN_EMAIL="your-admin@yourdomain.com"
ADMIN_PASSWORD="complex-admin-password"

# 4. ç”Ÿäº§ç¯å¢ƒæ ‡è¯†
NODE_ENV=production

# 5. é™åˆ¶è®¿é—®ä¸»æœº
VITE_ALLOWED_HOSTS="yourdomain.com,www.yourdomain.com,api.yourdomain.com"
```

#### é˜²ç«å¢™é…ç½®
```bash
# å®‰è£…å¹¶é…ç½®ufw
sudo ufw enable
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp      # SSH
sudo ufw allow 80/tcp      # HTTP
sudo ufw allow 443/tcp     # HTTPS
sudo ufw deny 3001/tcp     # ç¦æ­¢ç›´æ¥è®¿é—®APIç«¯å£
sudo ufw deny 5432/tcp     # ç¦æ­¢ç›´æ¥è®¿é—®æ•°æ®åº“
sudo ufw deny 6379/tcp     # ç¦æ­¢ç›´æ¥è®¿é—®Redis
```

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### PM2ä¼˜åŒ–é…ç½®
å½“å‰é¡¹ç›®çš„PM2é…ç½®å·²ç»ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š
- **å†…å­˜ç®¡ç†**: 1.5GBå†…å­˜é™åˆ¶è‡ªåŠ¨é‡å¯
- **è¿›ç¨‹ä¼˜åŒ–**: Node.jsè¿è¡Œæ—¶å‚æ•°è°ƒä¼˜
- **å¥åº·æ£€æŸ¥**: 30ç§’é—´éš”ç›‘æ§
- **æ—¥å¿—ç®¡ç†**: åˆ†ç¦»çš„é”™è¯¯å’Œè¾“å‡ºæ—¥å¿—
- **Zero-downtime**: é›¶åœæœºé‡è½½åŠŸèƒ½

#### æ‰©å±•é…ç½®ï¼ˆé«˜è´Ÿè½½ç¯å¢ƒï¼‰
```bash
# å¤šå®ä¾‹é…ç½®ï¼ˆéœ€è¦Nginxè´Ÿè½½å‡è¡¡ï¼‰
# ä¿®æ”¹ ecosystem.config.cjs ä¸­çš„ instances: 2-4
# é…ç½®ä¸åŒç«¯å£ï¼š3001, 3002, 3003, 3004
```

### ğŸ” ç›‘æ§å‘Šè­¦

#### ç³»ç»Ÿç›‘æ§
```bash
# è®¾ç½®å®šæ—¶å¥åº·æ£€æŸ¥
crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼š
*/5 * * * * /var/www/tron-energy-rental/deployment/scripts/health-check.sh -q -r
0 2 * * * find /var/www/tron-energy-rental/logs -name "*.log" -mtime +7 -delete
```

#### å…³é”®æŒ‡æ ‡ç›‘æ§
- **APIå“åº”æ—¶é—´**: < 2ç§’
- **å†…å­˜ä½¿ç”¨ç‡**: < 80%
- **CPUä½¿ç”¨ç‡**: < 70%
- **ç£ç›˜ä½¿ç”¨ç‡**: < 85%
- **æ•°æ®åº“è¿æ¥æ•°**: < 80% æœ€å¤§è¿æ¥æ•°
- **Rediså†…å­˜ä½¿ç”¨**: < 80%

### ğŸ”„ å¤‡ä»½ç­–ç•¥

#### åŒé‡å¤‡ä»½ç³»ç»Ÿ
é¡¹ç›®æä¾›ä¸¤ç§å¤‡ä»½æ ¼å¼ä»¥é€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯ï¼š
- **æ ‡å‡†ç‰ˆæœ¬**: å®Œæ•´æ•°æ®åº“é‡å»ºï¼Œé€‚åˆè‡ªåŠ¨åŒ–éƒ¨ç½²
- **Navicatå…¼å®¹ç‰ˆ**: å›¾å½¢åŒ–å·¥å…·å¯¼å…¥ï¼Œé€‚åˆæ‰‹åŠ¨ç®¡ç†

#### è‡ªåŠ¨åŒ–æ•°æ®åº“å¤‡ä»½
```bash
# æ·»åŠ åˆ°crontab - ä½¿ç”¨é¡¹ç›®ç®¡ç†è„šæœ¬
0 2 * * * cd /var/www/tron-energy-rental && ./project.sh -c "backup_both"
0 0 * * 0 find /var/www/tron-energy-rental/backups -name "*.sql" -mtime +30 -delete

# æˆ–ä½¿ç”¨ç‹¬ç«‹å¤‡ä»½è„šæœ¬
0 2 * * * /var/www/tron-energy-rental/scripts/database/backup-database.sh
```

#### å¤‡ä»½æ–‡ä»¶ç»“æ„
```
backups/
â”œâ”€â”€ db_backup_tron_energy_rental_*.sql      # æ ‡å‡†ç‰ˆæœ¬å¤‡ä»½
â”œâ”€â”€ db_backup_navicat_*.sql                 # Navicatå…¼å®¹ç‰ˆæœ¬
â”œâ”€â”€ daily/                                  # æ¯æ—¥å¤‡ä»½å½’æ¡£
â”œâ”€â”€ weekly/                                 # æ¯å‘¨å¤‡ä»½å½’æ¡£  
â””â”€â”€ monthly/                                # æ¯æœˆå¤‡ä»½å½’æ¡£
```

#### å¤‡ä»½æœ€ä½³å®è·µ
```bash
# å¤‡ä»½å‰æ£€æŸ¥
./scripts/database/backup-database.sh --verify-before
./scripts/database/backup-database.sh --encrypt

# æ¢å¤æµ‹è¯•ï¼ˆæ¨èå‘½ä»¤è¡Œæ–¹å¼ï¼‰
psql -d test_restore_db -f backup_file.sql

# éªŒè¯æ¢å¤ç»“æœ  
psql -d test_restore_db -c "SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public';"
```

### ğŸš¨ æ•…éšœæ’æŸ¥æŒ‡å—

#### å¸¸è§é—®é¢˜è¯Šæ–­
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status
systemctl status nginx postgresql redis

# 2. æ£€æŸ¥ç«¯å£å ç”¨
ss -tlnp | grep -E ":80|:443|:3001|:5432|:6379"

# 3. æ£€æŸ¥æ—¥å¿—é”™è¯¯
pm2 logs tron-energy-api --lines 50
tail -f /var/log/nginx/error.log

# 4. æ•°æ®åº“è¿æ¥æµ‹è¯•
psql postgresql://username:password@localhost:5432/tron_energy_rental -c "SELECT 1;"

# 5. Redisè¿æ¥æµ‹è¯•
redis-cli ping

# 6. æ•°æ®åº“å¤‡ä»½æ¢å¤è¯Šæ–­
# æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
ls -la backups/ | grep -E "\.sql$"
head -10 backups/your_backup_file.sql

# æµ‹è¯•å¤‡ä»½æ¢å¤ï¼ˆå‘½ä»¤è¡Œæ–¹å¼ - æ¨èï¼‰
psql -d test_database -f backups/backup_file.sql --single-transaction

# å›¾å½¢åŒ–å·¥å…·é—®é¢˜è¯Šæ–­
# å¦‚æœ Navicat å¯¼å…¥å¤±è´¥ï¼Œå°è¯•ï¼š
# - ä½¿ç”¨ Navicat å…¼å®¹ç‰ˆæœ¬æ–‡ä»¶
# - æ£€æŸ¥æ–‡ä»¶ç¼–ç ï¼ˆåº”ä¸º UTF-8ï¼‰
# - åœ¨ Navicat ä¸­å¯ç”¨"é‡åˆ°é”™è¯¯æ—¶ç»§ç»­"é€‰é¡¹
```

#### åº”æ€¥å“åº”æµç¨‹
1. **æœåŠ¡å¼‚å¸¸**: æ£€æŸ¥PM2çŠ¶æ€ â†’ æŸ¥çœ‹é”™è¯¯æ—¥å¿— â†’ é‡å¯æœåŠ¡
2. **æ•°æ®åº“é—®é¢˜**: æ£€æŸ¥è¿æ¥ â†’ æŸ¥çœ‹æ…¢æŸ¥è¯¢ â†’ é‡å¯æ•°æ®åº“æœåŠ¡
3. **ç½‘ç»œé—®é¢˜**: æ£€æŸ¥Nginxé…ç½® â†’ éªŒè¯SSLè¯ä¹¦ â†’ é‡è½½é…ç½®
4. **å†…å­˜æ³„æ¼**: ç›‘æ§å†…å­˜ä½¿ç”¨ â†’ åˆ†æheap dump â†’ ä¼˜åŒ–ä»£ç 
5. **æ•°æ®åº“æŸå**: ç«‹å³å¤‡ä»½å½“å‰çŠ¶æ€ â†’ ä½¿ç”¨æœ€æ–°å¤‡ä»½æ¢å¤ â†’ éªŒè¯æ•°æ®å®Œæ•´æ€§
6. **å¤‡ä»½æ¢å¤å¤±è´¥**: 
   - ä¼˜å…ˆä½¿ç”¨å‘½ä»¤è¡Œå¯¼å…¥ `psql -f backup_file.sql`
   - æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§å’Œæƒé™
   - å°è¯•ä¸åŒå¤‡ä»½ç‰ˆæœ¬ï¼ˆæ ‡å‡†ç‰ˆ vs Navicatç‰ˆï¼‰
   - åˆ†æ®µæ¢å¤æˆ–æ‰‹åŠ¨æ‰§è¡Œå…³é”®éƒ¨åˆ†

### ğŸ“‹ ç”Ÿäº§éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ç¯å¢ƒå˜é‡å®‰å…¨é…ç½®å®Œæˆ
- [ ] æ•°æ®åº“å¯†ç å·²ä¿®æ”¹
- [ ] JWTå¯†é’¥å·²æ›´æ¢ï¼ˆ32å­—ç¬¦ä»¥ä¸Šï¼‰
- [ ] ç®¡ç†å‘˜å¯†ç å·²ä¿®æ”¹
- [ ] é˜²ç«å¢™è§„åˆ™é…ç½®å®Œæˆ
- [ ] SSLè¯ä¹¦å®‰è£…å®Œæˆ
- [ ] Nginxé…ç½®ä¼˜åŒ–å®Œæˆ
- [ ] PM2æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] æ•°æ®åº“å¤‡ä»½ç­–ç•¥è®¾ç½®
- [ ] æ—¥å¿—è½®è½¬é…ç½®å®Œæˆ
- [ ] ç›‘æ§å‘Šè­¦è®¾ç½®å®Œæˆ
- [ ] å¥åº·æ£€æŸ¥è„šæœ¬é…ç½®
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•å®Œæˆ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### è´¡çŒ®æµç¨‹

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **åˆ›å»º Pull Request**

### è´¡çŒ®ç±»å‹

- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ“š æ–‡æ¡£æ”¹è¿›
- ğŸ¨ ä»£ç ä¼˜åŒ–
- ğŸ§ª æµ‹è¯•å®Œå–„
- ğŸ”§ å·¥å…·æ”¹è¿›

### ä»£ç æäº¤è§„èŒƒ

```
type(scope): description

[optional body]

[optional footer]
```

**ç±»å‹è¯´æ˜**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œç¤¾åŒºçš„æ”¯æŒï¼š

- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Express.js](https://expressjs.com/) - å¿«é€Ÿã€æç®€çš„ Node.js Web æ¡†æ¶
- [TronWeb](https://github.com/tronprotocol/tronweb) - TRON åŒºå—é“¾ JavaScript SDK
- [Element Plus](https://element-plus.org/) - Vue 3 ç»„ä»¶åº“
- [PostgreSQL](https://www.postgresql.org/) - å¼ºå¤§çš„å¼€æºå…³ç³»å‹æ•°æ®åº“

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ç»´æŠ¤è€…**: [é¡¹ç›®å›¢é˜Ÿ]
- **æŠ€æœ¯æ”¯æŒ**: support@example.com
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](../../issues)
- **åŠŸèƒ½å»ºè®®**: [GitHub Discussions](../../discussions)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

**ğŸ”§ å½“å‰ç‰ˆæœ¬**: v1.0.0  
**ğŸ“… æœ€åæ›´æ–°**: 2025å¹´9æœˆ  
**ğŸ’» æ´»è·ƒç»´æŠ¤**: âœ… æŒç»­æ›´æ–°ä¸­

 Made with â¤ï¸ by TRON Energy Rental Team

</div>